(function(_,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(_=typeof globalThis<"u"?globalThis:_||self,e(_.MiniFramework={},_.Vue))})(this,function(_,e){"use strict";const T={class:"flex items-center space-x-2"},A=e.defineComponent({__name:"DictEdit",props:{modelValue:{},disabled:{type:Boolean},draft:{type:Boolean},options:{},keyFormat:{},autosave:{type:Boolean},valueType:{}},emits:["update:modelValue","save","update:draft","refresh"],setup(p,{emit:m}){const t=p,c=e.computed(()=>t.options?.map(i=>typeof i=="string"?{label:i,value:i}:i)??[]),a=i=>i.valueType??t.valueType??"select";return(i,n)=>{const f=e.resolveComponent("el-option"),u=e.resolveComponent("el-table-column");return e.openBlock(),e.createBlock(u,{label:"Value",width:"180"},{default:e.withCtx(({row:r})=>[e.createElementVNode("div",T,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a(r)==="string"?"el-input":a(r)==="number"?"el-input-number":"el-select"),{modelValue:r.value,"onUpdate:modelValue":y=>r.value=y,size:"small",style:{width:"100%"},disabled:i.disabled,placeholder:a(r)==="select"?"Select option":a(r)==="number"?"Enter number":"Enter text"},{default:e.withCtx(()=>[a(r)==="select"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(c.value,y=>(e.openBlock(),e.createBlock(f,{key:y.value,label:y.label,value:y.value},null,8,["label","value"]))),128)):e.createCommentVNode("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","placeholder"]))])]),_:1})}}});/*! Element Plus Icons Vue v2.3.1 */var S=e.defineComponent({name:"Close",__name:"close",setup(p){return(m,t)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),w=S,j=e.defineComponent({name:"Edit",__name:"edit",setup(p){return(m,t)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),e.createElementVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})]))}}),N=j;const F={key:0,class:"flex flex-wrap gap-2 items-center"},O={class:"mt-2 w-full flex justify-end gap-2"},$={class:"truncate max-w-[170px] block"},L={key:0,class:"flex justify-end items-center space-x-1"},U={class:"flex items-center space-x-1"},M={key:2,class:"flex items-center space-x-2 w-full"},I={key:0,class:"flex items-center space-x-1"},Y={class:"flex items-center space-x-1"},H={key:4},K={class:"flex items-center space-x-1"},R=((p,m)=>{const t=p.__vccOpts||p;for(const[c,a]of m)t[c]=a;return t})(e.defineComponent({__name:"DynamicInputEditor",props:{modelValue:{},label:{},disabled:{type:Boolean},type:{},placeholder:{},dateDefaultVal:{},isDate:{type:Boolean},isDict:{type:Boolean},readonly:{type:Boolean}},emits:["update:modelValue","save","cancel","info","validate"],setup(p,{emit:m}){const t=p,c=m,a=e.ref([]),i=e.ref(!1),n=e.ref(!1),f=e.ref(null),u=e.computed(()=>Array.isArray(t.modelValue)),r=e.computed(()=>t.isDict&&t.modelValue!==null&&!Array.isArray(t.modelValue)),y=e.computed(()=>typeof t.modelValue=="object"&&t.modelValue!==null&&!Array.isArray(t.modelValue)&&"label"in t.modelValue),o=e.ref(null);e.watchEffect(()=>{const l=t.modelValue;Array.isArray(l)?(a.value=l.map(s=>typeof s=="string"?s:s.label??""),o.value=""):r.value?(o.value={...l},a.value=[]):typeof l=="number"?(o.value=l,a.value=[]):typeof l=="string"?(o.value=l,a.value=[]):y.value?(o.value=l.label??"",a.value=[]):(o.value="",a.value=[])});function V(){i.value=!0}function x(){const l=o.value?.toString().trim();if(l){if(a.value.includes(l)){c("info",`"${l}" is already added and cannot be duplicated.`),c("validate",!1),o.value="",n.value=!1;return}c("validate",!0),a.value.push(l),o.value="",n.value=!1}}function B(l){a.value.splice(l,1)}function b(){let l;u.value?l=a.value:r.value?l={...o.value}:y.value?l={...t.modelValue,label:o.value}:l=o.value,c("update:modelValue",l),c("save",l),i.value=!1}function C(){o.value=typeof t.modelValue=="string"?t.modelValue:t.modelValue?.label??"",c("cancel"),i.value=!1,n.value=!1}function P(l){o.value=l,c("update:modelValue",l)}return(l,s)=>{const h=e.resolveComponent("el-tag"),D=e.resolveComponent("el-input"),k=e.resolveComponent("el-button"),G=e.resolveComponent("el-icon"),E=e.resolveComponent("el-popconfirm"),J=e.resolveComponent("el-input-number"),Q=e.resolveComponent("el-date-picker");return e.openBlock(),e.createElementBlock("div",null,[u.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[i.value?(e.openBlock(),e.createElementBlock("div",F,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(d,g)=>(e.openBlock(),e.createBlock(h,{key:g,closable:"",onClose:W=>B(g),size:"small"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d),1)]),_:2},1032,["onClose"]))),128)),n.value?(e.openBlock(),e.createBlock(h,{key:0,class:"px-0"},{default:e.withCtx(()=>[e.createVNode(D,{ref_key:"inputRef",ref:f,modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=d=>o.value=d),class:"w-20",size:"small",onKeyup:e.withKeys(x,["enter"]),onBlur:x,style:{border:"none",outline:"none"}},null,8,["modelValue"])]),_:1})):(e.openBlock(),e.createBlock(h,{key:1,type:"info",class:"cursor-pointer",onClick:s[1]||(s[1]=()=>{n.value=!0,o.value="",e.nextTick(()=>f.value?.focus())})},{default:e.withCtx(()=>[e.createTextVNode(" + "+e.toDisplayString(l.label),1)]),_:1})),e.createElementVNode("div",O,[e.createVNode(k,{size:"small",onClick:C},{default:e.withCtx(()=>s[6]||(s[6]=[e.createTextVNode("Cancel")])),_:1,__:[6]}),e.createVNode(k,{type:"primary",size:"small",onClick:b},{default:e.withCtx(()=>s[7]||(s[7]=[e.createTextVNode("Save")])),_:1,__:[7]})])])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"flex flex-wrap gap-2 cursor-pointer",onClick:V},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(d,g)=>(e.openBlock(),e.createBlock(h,{key:g,closable:"",onClose:e.withModifiers(W=>B(g),["stop"]),size:"small"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d),1)]),_:2},1032,["onClose"]))),128)),e.createVNode(h,{type:"info",class:"cursor-pointer"},{default:e.withCtx(()=>s[8]||(s[8]=[e.createTextVNode("+ New Tag")])),_:1,__:[8]})]))],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[i.value?l.type==="number"||l.type==="float"?(e.openBlock(),e.createBlock(J,{key:1,modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=d=>o.value=d),disabled:l.disabled,size:"small",class:"w-full",placeholder:l.label},{suffix:e.withCtx(()=>[e.createElementVNode("div",U,[e.createVNode(E,{title:"Are you sure you want to save the changes?","confirm-button-text":"Yes","cancel-button-text":"No",onConfirm:b},{reference:e.withCtx(()=>[e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:"Edit",title:"Save"})]),_:1}),e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:e.unref(w),onClick:C,title:"Cancel"},null,8,["icon"])])]),_:1},8,["modelValue","disabled","placeholder"])):l.type==="date"?(e.openBlock(),e.createElementBlock("div",M,[e.createVNode(Q,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=d=>o.value=d),disabled:l.disabled,size:"small",class:"w-full",placeholder:l.label,"default-value":t.dateDefaultVal},null,8,["modelValue","disabled","placeholder","default-value"]),l.disabled?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",I,[e.createVNode(E,{title:"Are you sure you want to save the changes?","confirm-button-text":"Yes","cancel-button-text":"No",onConfirm:b},{reference:e.withCtx(()=>[e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:e.unref(N),title:"Save"},null,8,["icon"])]),_:1}),e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:e.unref(w),onClick:C,title:"Cancel"},null,8,["icon"])]))])):l.type==="email"?(e.openBlock(),e.createBlock(D,{key:3,modelValue:o.value,"onUpdate:modelValue":s[4]||(s[4]=d=>o.value=d),type:"email",size:"small",class:"w-full",placeholder:l.label},{suffix:e.withCtx(()=>[e.createElementVNode("div",Y,[e.createVNode(E,{title:"Are you sure you want to save the changes?","confirm-button-text":"Yes","cancel-button-text":"No",onConfirm:b},{reference:e.withCtx(()=>[e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:e.unref(N),title:"Save"},null,8,["icon"])]),_:1}),e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:e.unref(w),onClick:C,title:"Cancel"},null,8,["icon"])])]),_:1},8,["modelValue","placeholder"])):l.type==="dict"?(e.openBlock(),e.createElementBlock("div",H,[e.renderSlot(l.$slots,"dict",{vModel:o.value,disabled:l.disabled,label:l.label,readonly:l.readonly,type:l.type,placeholder:l.placeholder,isDict:r.value,updateModelValue:P,save:b,cancel:C},void 0,!0)])):(e.openBlock(),e.createBlock(D,{key:5,modelValue:o.value,"onUpdate:modelValue":s[5]||(s[5]=d=>o.value=d),size:"small",class:"w-full",disabled:l.disabled,placeholder:l.label},{suffix:e.withCtx(()=>[e.createElementVNode("div",K,[e.createVNode(E,{title:"Are you sure you want to save the changes?","confirm-button-text":"Yes","cancel-button-text":"No",onConfirm:b},{reference:e.withCtx(()=>[e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:e.unref(N),title:"Save"},null,8,["icon"])]),_:1}),e.createVNode(k,{class:"compact-btn",type:"text",size:"small",icon:e.unref(w),onClick:C,title:"Cancel"},null,8,["icon"])])]),_:1},8,["modelValue","disabled","placeholder"])):(e.openBlock(),e.createElementBlock("div",{key:0,class:"cursor-pointer flex justify-between items-center",onClick:V},[e.createElementVNode("span",$,e.toDisplayString(o.value||t.placeholder||"—"),1),l.disabled?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",L,[e.createVNode(G,null,{default:e.withCtx(()=>[e.createVNode(e.unref(N))]),_:1})]))]))],64))])}}}),[["__scopeId","data-v-44df74d5"]]);function z(p,m){return m.split(".").reduce((t,c)=>t?t[c]:void 0,p)}const q=e.defineComponent({__name:"EnityDetailDialog",props:{modelValue:{type:Boolean},loading:{type:Boolean},title:{},infoObject:{},fields:{},width:{}},emits:["update:modelValue","close"],setup(p,{emit:m}){const t=p,c=m,a=e.computed(()=>{const n={};if(!t.infoObject)return n;for(const f of t.fields)if(f.children?.length)for(const u of f.children)n[u.key]=z(t.infoObject,u.key);else n[f.key]=z(t.infoObject,f.key);return n});function i(){c("update:modelValue",!1),c("close")}return(n,f)=>{const u=e.resolveComponent("el-descriptions-item"),r=e.resolveComponent("el-descriptions"),y=e.resolveComponent("el-skeleton"),o=e.resolveComponent("el-dialog");return e.openBlock(),e.createBlock(o,{"model-value":n.modelValue,title:n.title,width:n.width,onClose:i},{default:e.withCtx(()=>[e.createVNode(y,{loading:n.loading,animated:""},{default:e.withCtx(()=>[n.infoObject?(e.openBlock(),e.createBlock(r,{key:0,column:1,border:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.fields,(V,x)=>(e.openBlock(),e.createBlock(u,{key:x,label:V.label},{default:e.withCtx(()=>[V.children?.length?(e.openBlock(),e.createBlock(r,{key:0,column:1,border:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V.children,(B,b)=>(e.openBlock(),e.createBlock(u,{key:b,label:B.label},{default:e.withCtx(()=>[n.$slots.custom?e.renderSlot(n.$slots,"custom",{key:0,item:B,infoObject:n.infoObject,value:a.value[B.key]??"N/A",fields:n.fields,nestedValues:a.value}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(a.value[B.key]??"N/A"),1)],64))]),_:2},1032,["label"]))),128))]),_:2},1024)):n.$slots.custom?e.renderSlot(n.$slots,"custom",{key:1,item:V,infoObject:n.infoObject,value:a.value[V.key]??"N/A",fields:n.fields,nestedValues:a.value}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(a.value[V.key]??"N/A"),1)],64))]),_:2},1032,["label"]))),128))]),_:3})):e.createCommentVNode("",!0)]),_:3},8,["loading"])]),_:3},8,["model-value","title","width"])}}});_.DictEdit=A,_.DynamicInputEditor=R,_.EnityDetailDialog=q,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})});
